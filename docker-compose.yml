version: "3.9"
services:
  rfidsecuritysvc:
    image: "rfid-security-svc:latest"
    volumes:
      - type: bind
        source: ../rfid-security-svc/
        target: /rfid-security-svc
      - rfid-db:/rfid-db
  rfidsecurityui:
    build:
      context: ../rfid-security-ui
      args:
        USER_ID: ${USER_ID}
        GROUP_ID: ${GROUP_ID}
    depends_on:
      - rfidsecuritysvc
    environment:
      WEBPACK_PUBLIC: "devpi.local:8080"
      WEBPACK_DISABLE_HOST_CHECK: "true"
      VUE_APP_RFID_API_URL: "http://devpi.local:8080/api/v1.0/"
    image: rfid-security-ui:latest
    ports:
      - "8080:8080"
    volumes:
      - type: bind
        source: ../rfid-security-ui/
        target: /rfid-security-ui
volumes:
  rfid-db:
    external: true
